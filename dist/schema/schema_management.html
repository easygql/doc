<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>二、Schema | EasyGQL Documentation</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/doc/img/favicon.ico">
    <meta name="description" content="EasyGQL 文档">
    <link rel="preload" href="/doc/assets/css/0.styles.ba170dd8.css" as="style"><link rel="preload" href="/doc/assets/js/app.b791fc28.js" as="script"><link rel="preload" href="/doc/assets/js/2.93ca64ef.js" as="script"><link rel="preload" href="/doc/assets/js/23.bc38f969.js" as="script"><link rel="prefetch" href="/doc/assets/js/10.4de207f3.js"><link rel="prefetch" href="/doc/assets/js/11.ba92edd1.js"><link rel="prefetch" href="/doc/assets/js/12.69d19805.js"><link rel="prefetch" href="/doc/assets/js/13.e3ec0e41.js"><link rel="prefetch" href="/doc/assets/js/14.aa523e3d.js"><link rel="prefetch" href="/doc/assets/js/15.244570ec.js"><link rel="prefetch" href="/doc/assets/js/16.5fd74724.js"><link rel="prefetch" href="/doc/assets/js/17.2f17b380.js"><link rel="prefetch" href="/doc/assets/js/18.95283607.js"><link rel="prefetch" href="/doc/assets/js/19.fda34197.js"><link rel="prefetch" href="/doc/assets/js/20.3651b434.js"><link rel="prefetch" href="/doc/assets/js/21.5ff64d6a.js"><link rel="prefetch" href="/doc/assets/js/22.90eb7f3d.js"><link rel="prefetch" href="/doc/assets/js/24.4d128aff.js"><link rel="prefetch" href="/doc/assets/js/25.2d8bd82b.js"><link rel="prefetch" href="/doc/assets/js/26.21d013ec.js"><link rel="prefetch" href="/doc/assets/js/27.ddf308b8.js"><link rel="prefetch" href="/doc/assets/js/3.17c6633e.js"><link rel="prefetch" href="/doc/assets/js/4.1870bb72.js"><link rel="prefetch" href="/doc/assets/js/5.70487094.js"><link rel="prefetch" href="/doc/assets/js/6.c8ae8725.js"><link rel="prefetch" href="/doc/assets/js/7.dcf9958e.js"><link rel="prefetch" href="/doc/assets/js/8.4592f1b4.js"><link rel="prefetch" href="/doc/assets/js/9.df57f028.js">
    <link rel="stylesheet" href="/doc/assets/css/0.styles.ba170dd8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/doc/" class="home-link router-link-active"><!----> <span class="site-name">EasyGQL Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://easygql.github.io/easygql" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://easygql.github.io/easygql" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/doc/introduction/introduction.html" class="sidebar-link">一、介绍</a></li><li><a href="/doc/query/query.html" class="sidebar-link">二、查询</a></li><li><a href="/doc/mutation/mutation.html" class="sidebar-link">三、修改</a></li><li><a href="/doc/subscription/subscription.html" class="sidebar-link">四、实时订阅</a></li><li><a href="/doc/authentication/authentication.html" class="sidebar-link">五、鉴权</a></li><li><a href="/doc/migration/migration.html" class="sidebar-link">六、数据迁移</a></li><li><a href="/doc/schema/schema.html" class="sidebar-link">七、EasyGQL Schema</a></li><li><a href="/doc/api_reference/api_reference.html" class="sidebar-link">八、API列表</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="二、schema"><a href="#二、schema" class="header-anchor">#</a> 二、Schema</h1> <p>Schema是EasyGQL引擎的核心，每一个用户都可以使用EasyGQL控制台，根据自己的业务的数据模型、用户模型以及权限结构来定义满足自身业务需要的GraphQL模型（即Schema）。正常情况（集成外部Schema除外）下，应该为每一个完整的业务系统单独设计Schema,不同Schema之间在数据模型、权限设置、用户模型以及数据库存储都应该是隔离的。</p> <h2 id="_2-1-schema的数据模型"><a href="#_2-1-schema的数据模型" class="header-anchor">#</a> 2.1 Schema的数据模型</h2> <p><img src="/doc/img/schema_datamodel.png" alt="EasyGQL架构">
上图是EasyGQL种的一个Schema的数据模型</p> <h2 id="_2-2-schema的基本概念"><a href="#_2-2-schema的基本概念" class="header-anchor">#</a> 2.2 Schema的基本概念</h2> <p>在EasyGQL的一个Schema中主要涉及以下概念：</p> <ul><li>Schema，用于表示一个Schema对应的名字，描述，类型信息。</li> <li>DataSource，用于表示这个Schema对应的数据库持久化地址，可以支持多类据库，主要有数据库IP、用户名、密码、连接字符串等信息。</li> <li>ContentType，用于表示这个Schema对应的对象类型，有描述，类名，增、删、改、查的各类约束。</li> <li>Trigger，用于表示这个Schema对应的触发器列表，主要有触发器名字，触发器远程URL，触发器参数列表，触发器payload模板，触发器成功标识等。</li> <li>TriggerHisotry,触发器历史，每当触发器订阅的事件发生时，会在该表插入一条记录，记录事件内容，以及发送是否成功。</li> <li>EnumType，枚举类型，表示这个Schema拥有的枚举类型，主要有类型名属性。</li> <li>EnumElement，枚举类型元素，表示某一个枚举类型所对应的枚举值。</li> <li>SchemaMetaData,一个已发布的schema对应的graphql属性值，主要有schemaobject(用于定义graphql实例)，版本号，对应schemaid。</li> <li>ThirdAPI,用于表示一个Schema启用的API列表以及每个API的角色权限信息。</li> <li>RelationField，用于表示一个ContentType对应的关系型字段信息，用于将一个ContentType对象作为别的ContentType的字段。</li> <li>EnumField，用于表示一个ContentType所拥有的枚举类型字段</li> <li>ScalarField，用于表示一个ContentType所用于的标量类型字段。</li> <li>UniqueConstraint，用于定义一个ContentType的复合唯一索引。</li></ul> <h2 id="_2-3-schema管理api"><a href="#_2-3-schema管理api" class="header-anchor">#</a> 2.3 Schema管理API</h2> <h3 id="_2-3-1-新建schema"><a href="#_2-3-1-新建schema" class="header-anchor">#</a> 2.3.1 新建Schema</h3> <ol><li>新建一个Schema使用如下API：</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">SchemaCreate</span><span class="token punctuation">(</span>databasekind<span class="token operator">:</span> DatabaseKind <span class="token operator">=</span> PostgreSQL<span class="token punctuation">,</span> description<span class="token operator">:</span> String<span class="token punctuation">,</span> name<span class="token operator">:</span> String<span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> SchemaCreate_ThirdOutput
</code></pre></div><h3 id="_2-3-2-修改schema"><a href="#_2-3-2-修改schema" class="header-anchor">#</a> 2.3.2 修改Schema</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">SchemaUpdate</span><span class="token punctuation">(</span>object<span class="token operator">:</span> SchemaUpdateInput<span class="token operator">!</span><span class="token punctuation">,</span> where<span class="token operator">:</span> SchemaWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _UpdateResult 
  input SchemaUpdateInput <span class="token punctuation">{</span>
  databasekind<span class="token operator">:</span> DatabaseKind
  description<span class="token operator">:</span> String
  name<span class="token operator">:</span> String
  status<span class="token operator">:</span> SchemaStatus
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-3-3-删除schema"><a href="#_2-3-3-删除schema" class="header-anchor">#</a> 2.3.3 删除Schema</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">SchemaDestroy</span><span class="token punctuation">(</span>where<span class="token operator">:</span> SchemaWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _DeleteResult 
  input SchemaListMatch <span class="token punctuation">{</span>
  hasone<span class="token operator">:</span> SchemaWhereInput
<span class="token punctuation">}</span>
input SchemaWhereInput <span class="token punctuation">{</span>
  and<span class="token operator">:</span> <span class="token punctuation">[</span>SchemaWhereInput<span class="token punctuation">]</span>
  field_contains<span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">]</span>
  filter<span class="token operator">:</span> SchemaFieldFilter
  not<span class="token operator">:</span> SchemaWhereInput
  or<span class="token operator">:</span> <span class="token punctuation">[</span>SchemaWhereInput<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
input SchemaFieldFilter <span class="token punctuation">{</span>
  datasource<span class="token operator">:</span> DataSourceFieldFilter
  description<span class="token operator">:</span> StringFilter
  enumtypes<span class="token operator">:</span> EnumTypeListMatch
  id<span class="token operator">:</span> IDFilter
  name<span class="token operator">:</span> StringFilter
  objecttypes<span class="token operator">:</span> ContentTypeListMatch
  published_history<span class="token operator">:</span> SchemaMetaDataListMatch
  published_schema<span class="token operator">:</span> SchemaMetaDataFieldFilter
  relations<span class="token operator">:</span> RelationFieldListMatch
  thirdapis<span class="token operator">:</span> ThirdAPIListMatch
  triggerhistory<span class="token operator">:</span> TriggerHistoryListMatch
  triggers<span class="token operator">:</span> TriggerListMatch
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-3-4-设置datasource"><a href="#_2-3-4-设置datasource" class="header-anchor">#</a> 2.3.4 设置DataSource</h3> <p>1.设置DataSource使用如下API:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">datasourceInSchema_ObjectInput</span><span class="token punctuation">(</span>from_id<span class="token operator">:</span> <span class="token constant">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> to_object<span class="token operator">:</span> DataSourceInput<span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> _NestInputResult
</code></pre></div><p>如果不设置DataSource，则会使用默认的数据库API。</p> <h3 id="_2-3-5-修改datasource"><a href="#_2-3-5-修改datasource" class="header-anchor">#</a> 2.3.5 修改DataSource</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">DataSourceUpdate</span><span class="token punctuation">(</span>object<span class="token operator">:</span> DataSourceUpdateInput<span class="token operator">!</span><span class="token punctuation">,</span> where<span class="token operator">:</span> DataSourceWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _UpdateResult 
</code></pre></div><h3 id="_2-3-6-删除datasource"><a href="#_2-3-6-删除datasource" class="header-anchor">#</a> 2.3.6 删除DataSource</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">DataSourceDestroy</span><span class="token punctuation">(</span>where<span class="token operator">:</span> DataSourceWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _DeleteResult 
</code></pre></div><h3 id="_2-3-7-新建enumtype"><a href="#_2-3-7-新建enumtype" class="header-anchor">#</a> 2.3.7 新建EnumType</h3> <p>1.添加EnumElent使用如下API:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">enumtypesInSchema_ObjectInput</span><span class="token punctuation">(</span>from_id<span class="token operator">:</span> <span class="token constant">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> reset<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> to_object<span class="token operator">:</span> <span class="token punctuation">[</span>EnumTypeInput<span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> _NestInputResult
</code></pre></div><h3 id="_2-3-8-修改enumtype"><a href="#_2-3-8-修改enumtype" class="header-anchor">#</a> 2.3.8 修改EnumType</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">EnumTypeUpdate</span><span class="token punctuation">(</span>object<span class="token operator">:</span> EnumTypeUpdateInput<span class="token operator">!</span><span class="token punctuation">,</span> where<span class="token operator">:</span> EnumTypeWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _UpdateResult 
</code></pre></div><h3 id="_2-3-9-删除enumtype"><a href="#_2-3-9-删除enumtype" class="header-anchor">#</a> 2.3.9 删除EnumType</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    <span class="token function">EnumTypeDestroy</span><span class="token punctuation">(</span>where<span class="token operator">:</span> EnumTypeWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _DeleteResult 
</code></pre></div><h3 id="_2-3-10-添加enumelement"><a href="#_2-3-10-添加enumelement" class="header-anchor">#</a> 2.3.10 添加EnumElement</h3> <p>1.在EnumType中，新增枚举值，使用如下API：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">valuesInEnumType_ObjectInput</span><span class="token punctuation">(</span>from_id<span class="token operator">:</span> <span class="token constant">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> reset<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> to_object<span class="token operator">:</span> <span class="token punctuation">[</span>EnumElementInput<span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> _NestInputResult
</code></pre></div><h3 id="_2-3-11-修改enumelement"><a href="#_2-3-11-修改enumelement" class="header-anchor">#</a> 2.3.11 修改EnumElement</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">EnumElementUpdate</span><span class="token punctuation">(</span>object<span class="token operator">:</span> EnumElementUpdateInput<span class="token operator">!</span><span class="token punctuation">,</span> where<span class="token operator">:</span> EnumElementWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _UpdateResult 
</code></pre></div><h3 id=""><a href="#" class="header-anchor">#</a></h3> <h3 id="_2-3-12-删除enumelement"><a href="#_2-3-12-删除enumelement" class="header-anchor">#</a> 2.3.12 删除EnumElement</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">EnumElementDestroy</span><span class="token punctuation">(</span>where<span class="token operator">:</span> EnumElementWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _DeleteResult 
</code></pre></div><h3 id="_2-3-13-新建role"><a href="#_2-3-13-新建role" class="header-anchor">#</a> 2.3.13 新建Role</h3> <p>在Schema创建是默认会创建一个ID 为schemaID+&quot;_role&quot;的一个枚举类型，用以表示角色，新增角色使用如下API:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">valuesInEnumType_ObjectInput</span><span class="token punctuation">(</span>from_id<span class="token operator">:</span> <span class="token constant">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> reset<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> to_object<span class="token operator">:</span> <span class="token punctuation">[</span>EnumElementInput<span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> _NestInputResult
</code></pre></div><h3 id="_2-3-14-修改role"><a href="#_2-3-14-修改role" class="header-anchor">#</a> 2.3.14 修改Role</h3> <p>参考修改EnumType</p> <h3 id="_2-3-15-删除role"><a href="#_2-3-15-删除role" class="header-anchor">#</a> 2.3.15 删除Role</h3> <p>参考删除EnumType</p> <h3 id="_2-3-16-新建contenttype"><a href="#_2-3-16-新建contenttype" class="header-anchor">#</a> 2.3.16 新建ContentType</h3> <p>在新建一个ContentType时，需要以下步骤：</p> <ol><li>先新建ContentType类型，并设置各个角色的权限,使用如下API：</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">objecttypesInSchema_ObjectInput</span><span class="token punctuation">(</span>from_id<span class="token operator">:</span> <span class="token constant">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> reset<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> to_object<span class="token operator">:</span> <span class="token punctuation">[</span>ContentTypeInput<span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> _NestInputResult
</code></pre></div><p>其中from_id为对应Schema的ID，to_object是需要新增的object的输入对象列表，reset表示是否重置schema下的所有object列表，如果为true，schema下面的原来所有objecttype都将会被删除。</p> <p>ContentTypeInput的结构如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>input ContentTypeInput  <span class="token punctuation">{</span>
  delete_constraints<span class="token operator">:</span> Object
  description<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
  id<span class="token operator">:</span> <span class="token constant">ID</span>
  name<span class="token operator">:</span> String<span class="token operator">!</span>
  read_constraints<span class="token operator">:</span> Object
  undeletable_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  uninsertable_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  unreadable_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  unupdatable_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  update_constraints<span class="token operator">:</span> Object
<span class="token punctuation">}</span>
</code></pre></div><p>在以上输入结构中，有禁止读的角色列表、禁止写的角色列表、禁止插入角色列表、禁止更新角色列表，这些列表默认均为空，表示所有角色均能进行增删改查，还有各角色的删改查行级约束条件，以read_constraints为例，这是一个以角色名为key值，以ContentTypeWhereInput为value的键值对。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>input ContentTypeWhereInput  <span class="token punctuation">{</span>
  and<span class="token operator">:</span> <span class="token punctuation">[</span>ContentTypeWhereInput<span class="token punctuation">]</span>
  field_contains<span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">]</span>
  filter<span class="token operator">:</span> ContentTypeFieldFilter
  not<span class="token operator">:</span> ContentTypeWhereInput
  or<span class="token operator">:</span> <span class="token punctuation">[</span>ContentTypeWhereInput<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>设置标量字段，使用API</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">scalarfieldsInContentType_ObjectInput</span><span class="token punctuation">(</span>from_id<span class="token operator">:</span> <span class="token constant">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> reset<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> to_object<span class="token operator">:</span> <span class="token punctuation">[</span>ScalarFieldInput<span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> _NestInputResult
</code></pre></div><p>其中from_id为对应objectType的ID，to_object是需要新增标量字段的输入对象列表，reset表示是否重置。</p> <ol start="3"><li>设置枚举字段，使用API</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">enumfieldsInContentType_ObjectInput</span><span class="token punctuation">(</span>from_id<span class="token operator">:</span> <span class="token constant">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> reset<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> to_object<span class="token operator">:</span> <span class="token punctuation">[</span>EnumFieldInput<span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> _NestInputResult
</code></pre></div><p>其中from_id为对应objectType的ID，to_object是需要新增枚举字段的输入对象列表，reset表示是否重置。</p> <p>其中from_id为对应Schema的ID</p> <ol start="4"><li>新增关联关系，使用API</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">relationsInSchema_ObjectInput</span><span class="token punctuation">(</span>from_id<span class="token operator">:</span> <span class="token constant">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> reset<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> to_object<span class="token operator">:</span> <span class="token punctuation">[</span>RelationFieldInput<span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> _NestInputResult 
  input RelationFieldInput <span class="token punctuation">{</span>
  fromfield<span class="token operator">:</span> String<span class="token operator">!</span>
  fromobject<span class="token operator">:</span> String<span class="token operator">!</span>
  id<span class="token operator">:</span> <span class="token constant">ID</span>
  ifcascade<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span>
  invisible_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span>
  irrevisible_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span>
  relationtype<span class="token operator">:</span> RelationType<span class="token operator">!</span>
  tofield<span class="token operator">:</span> String<span class="token operator">!</span>
  toobject<span class="token operator">:</span> String<span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中，from_id表示schema的ID，</p> <h3 id="_2-3-17-修改contenttype"><a href="#_2-3-17-修改contenttype" class="header-anchor">#</a> 2.3.17 修改ContentType</h3> <p>修改一个ContentType时，根据修改内容的不通，分别可以调用一下Api</p> <ol><li>修改ContentType类型，使用如下API：</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">ContentTypeUpdate</span><span class="token punctuation">(</span>object<span class="token operator">:</span> ContentTypeUpdateInput<span class="token operator">!</span><span class="token punctuation">,</span> where<span class="token operator">:</span> ContentTypeWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _UpdateResult
  input ContentTypeUpdateInput  <span class="token punctuation">{</span>
  delete_constraints<span class="token operator">:</span> Object
  description<span class="token operator">:</span> String
  name<span class="token operator">:</span> String
  read_constraints<span class="token operator">:</span> Object
  undeletable_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span>
  uninsertable_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span>
  unreadable_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span>
  unupdatable_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span>
  update_constraints<span class="token operator">:</span> Object
<span class="token punctuation">}</span>
input ContentTypeWhereInput  <span class="token punctuation">{</span>
  and<span class="token operator">:</span> <span class="token punctuation">[</span>ContentTypeWhereInput<span class="token punctuation">]</span>
  field_contains<span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">]</span>
  filter<span class="token operator">:</span> ContentTypeFieldFilter
  not<span class="token operator">:</span> ContentTypeWhereInput
  or<span class="token operator">:</span> <span class="token punctuation">[</span>ContentTypeWhereInput<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
input ContentTypeFieldFilter  <span class="token punctuation">{</span>
  description<span class="token operator">:</span> StringFilter
  enumfields<span class="token operator">:</span> EnumFieldListMatch
  fromrelations<span class="token operator">:</span> RelationFieldListMatch
  id<span class="token operator">:</span> IDFilter
  name<span class="token operator">:</span> StringFilter
  objecttypes<span class="token operator">:</span> ContentTypeFieldFilter
  scalarfields<span class="token operator">:</span> ScalarFieldListMatch
  torelations<span class="token operator">:</span> RelationFieldListMatch
  unique_constraints<span class="token operator">:</span> UniqueConstraintListMatch
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>修改枚举字段</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">EnumFieldUpdate</span><span class="token punctuation">(</span>object<span class="token operator">:</span> EnumFieldUpdateInput<span class="token operator">!</span><span class="token punctuation">,</span> where<span class="token operator">:</span> EnumFieldWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _UpdateResult
input EnumFieldUpdateInput  <span class="token punctuation">{</span>
  defaultvalue<span class="token operator">:</span> Object
  invisible_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span>
  irrevisible_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span>
  islist<span class="token operator">:</span> Boolean
  name<span class="token operator">:</span> String
  type<span class="token operator">:</span> String
<span class="token punctuation">}</span>
</code></pre></div><p>4.修改枚举类型字段</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">RelationFieldUpdate</span><span class="token punctuation">(</span>object<span class="token operator">:</span> RelationFieldUpdateInput<span class="token operator">!</span><span class="token punctuation">,</span> where<span class="token operator">:</span> RelationFieldWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _UpdateResult 
  input RelationFieldUpdateInput <span class="token punctuation">{</span>
  fromfield<span class="token operator">:</span> String
  fromobject<span class="token operator">:</span> String
  ifcascade<span class="token operator">:</span> Boolean
  invisible_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span>
  irrevisible_roles<span class="token operator">:</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span>
  relationtype<span class="token operator">:</span> RelationType
  tofield<span class="token operator">:</span> String
  toobject<span class="token operator">:</span> String
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-3-18-删除contenttype"><a href="#_2-3-18-删除contenttype" class="header-anchor">#</a> 2.3.18 删除ContentType</h3> <p>1.删除ContentType</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">ContentTypeDestroy</span><span class="token punctuation">(</span>where<span class="token operator">:</span> ContentTypeWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _DeleteResult 
</code></pre></div><p>2.删除ScalarField</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">ScalarFieldDestroy</span><span class="token punctuation">(</span>where<span class="token operator">:</span> ScalarFieldWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _DeleteResult 
</code></pre></div><p>3.删除EnumField</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">EnumFieldDestroy</span><span class="token punctuation">(</span>where<span class="token operator">:</span> EnumFieldWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _DeleteResult 
</code></pre></div><p>4.删除RelationField</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">RelationFieldDestroy</span><span class="token punctuation">(</span>where<span class="token operator">:</span> RelationFieldWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _DeleteResult 
</code></pre></div><h3 id="_2-3-19-新建trigger"><a href="#_2-3-19-新建trigger" class="header-anchor">#</a> 2.3.19 新建Trigger</h3> <p>1.新建Trigger时，使用如下API</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">triggersInSchema_ObjectInput</span><span class="token punctuation">(</span>from_id<span class="token operator">:</span> <span class="token constant">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> reset<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> to_object<span class="token operator">:</span> <span class="token punctuation">[</span>TriggerInput<span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> _NestInputResult
</code></pre></div><h3 id="_2-3-20-修改trigger"><a href="#_2-3-20-修改trigger" class="header-anchor">#</a> 2.3.20 修改Trigger</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">TriggerUpdate</span><span class="token punctuation">(</span>object<span class="token operator">:</span> TriggerUpdateInput<span class="token operator">!</span><span class="token punctuation">,</span> where<span class="token operator">:</span> TriggerWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _UpdateResult 
</code></pre></div><h3 id="_2-3-21-删除trigger"><a href="#_2-3-21-删除trigger" class="header-anchor">#</a> 2.3.21 删除Trigger</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">TriggerDestroy</span><span class="token punctuation">(</span>where<span class="token operator">:</span> TriggerWhereInput<span class="token punctuation">)</span><span class="token operator">:</span> _DeleteResult 
</code></pre></div><h3 id="_2-3-22-设置thirdapi"><a href="#_2-3-22-设置thirdapi" class="header-anchor">#</a> 2.3.22 设置ThirdAPI</h3> <p>1.在设置API前，需要了解当前可以使用的API,使用如下API:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>ThirdAPIMany<span class="token operator">:</span> ThirdAPIMany_ThirdOutput
</code></pre></div><p>2.设置thirdapi:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">thirdapisInSchema_ObjectInput</span><span class="token punctuation">(</span>from_id<span class="token operator">:</span> <span class="token constant">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> reset<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> to_object<span class="token operator">:</span> <span class="token punctuation">[</span>ThirdAPIInput<span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> _NestInputResult
</code></pre></div><h3 id="_2-3-23-删除thirdapi"><a href="#_2-3-23-删除thirdapi" class="header-anchor">#</a> 2.3.23 删除ThirdAPI</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token function">thirdapisInSchema_NestRemove</span><span class="token punctuation">(</span>from_id<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">ID</span><span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">,</span> to_id<span class="token operator">:</span> <span class="token constant">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> _NestRemoveResult 
</code></pre></div><h3 id="_2-3-24-发布schema"><a href="#_2-3-24-发布schema" class="header-anchor">#</a> 2.3.24 发布Schema</h3> <p>1.schema的发布使用如下API:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">SchemaPublish</span><span class="token punctuation">(</span>id<span class="token operator">:</span> String<span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> SchemaPublish_ThirdOutput
</code></pre></div><h3 id="_2-3-25-schema的启停"><a href="#_2-3-25-schema的启停" class="header-anchor">#</a> 2.3.25 Schema的启停</h3> <p>1.schema的启动使用如下API:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">SchemaStart</span><span class="token punctuation">(</span>id<span class="token operator">:</span> String<span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> SchemaStart_ThirdOutput
</code></pre></div><p>2.schema的关闭使用如下API:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">SchemaStop</span><span class="token punctuation">(</span>id<span class="token operator">:</span> String<span class="token operator">!</span><span class="token punctuation">)</span><span class="token operator">:</span> SchemaStop_ThirdOutput
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/doc/assets/js/app.b791fc28.js" defer></script><script src="/doc/assets/js/2.93ca64ef.js" defer></script><script src="/doc/assets/js/23.bc38f969.js" defer></script>
  </body>
</html>
