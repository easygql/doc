(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{336:function(t,s,a){"use strict";a.r(s);var e=a(33),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"七、关联关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七、关联关系"}},[t._v("#")]),t._v(" 七、关联关系")]),t._v(" "),a("p",[t._v("EasyGQL在开发者定义对象类型时，允许开发者通过定义对象类型之间的关联关系来实现定义嵌套对象类型的字段。")]),t._v(" "),a("h2",{attrs:{id:"_7-1-关联关系的定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-关联关系的定义"}},[t._v("#")]),t._v(" 7.1 关联关系的定义")]),t._v(" "),a("p",[t._v("关联关系主要有以下属性：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("序号")]),t._v(" "),a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("含义")]),t._v(" "),a("th",[t._v("非空")]),t._v(" "),a("th",[t._v("默认值")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("1")]),t._v(" "),a("td",[t._v("id")]),t._v(" "),a("td",[t._v("唯一标识")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("无")])]),t._v(" "),a("tr",[a("td",[t._v("2")]),t._v(" "),a("td",[t._v("relationtype")]),t._v(" "),a("td",[t._v("关联关系类型（1对1、1对多、多对1、多对多）")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("1对1")])]),t._v(" "),a("tr",[a("td",[t._v("3")]),t._v(" "),a("td",[t._v("invisible")]),t._v(" "),a("td",[t._v("不可见角色列表")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("空的List")])]),t._v(" "),a("tr",[a("td",[t._v("4")]),t._v(" "),a("td",[t._v("irrevisible")]),t._v(" "),a("td",[t._v("不可修改列表")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("空的List")])]),t._v(" "),a("tr",[a("td",[t._v("5")]),t._v(" "),a("td",[t._v("description")]),t._v(" "),a("td",[t._v("描述")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v('""')])]),t._v(" "),a("tr",[a("td",[t._v("6")]),t._v(" "),a("td",[t._v("fromobject")]),t._v(" "),a("td",[t._v("左对象类型")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("无")])]),t._v(" "),a("tr",[a("td",[t._v("7")]),t._v(" "),a("td",[t._v("fromfield")]),t._v(" "),a("td",[t._v("左字段")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("无")])]),t._v(" "),a("tr",[a("td",[t._v("8")]),t._v(" "),a("td",[t._v("toobject")]),t._v(" "),a("td",[t._v("右对象类型")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("无")])]),t._v(" "),a("tr",[a("td",[t._v("9")]),t._v(" "),a("td",[t._v("tofield")]),t._v(" "),a("td",[t._v("右字段")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("无")])]),t._v(" "),a("tr",[a("td",[t._v("10")]),t._v(" "),a("td",[t._v("ifcascade")]),t._v(" "),a("td",[t._v("是否级联删除")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td",[t._v("无")])])])]),t._v(" "),a("p",[t._v("EasyGQL当前支持的关联关系类型有4种：1对1、1对多、多对1、多对多，具体：")]),t._v(" "),a("ul",[a("li",[t._v("1对1关系，表示每一个左对象类型对象（简称“左对象”）的都可以关联到最多1个右对象类型的对象（简称“右对象”）。比如配偶关系")]),t._v(" "),a("li",[t._v("1对多关系，表示一个左对象可以关联到多个右对象。比如父子关系")]),t._v(" "),a("li",[t._v("多对1关系，表示多个左对象可以对应的到1个右对象。比如国籍关系")]),t._v(" "),a("li",[t._v("多对多关系，表示每个左对象可以对应多个右对象，每个右对象又可以对应多个左对象。比如朋友关系。")])]),t._v(" "),a("p",[t._v("在EasyGQL的关联关系种只允许对1对1和1对多的关联关系定义级联删除，当定义了级联删除后，删除左对象时会自动删除右对象。")]),t._v(" "),a("h2",{attrs:{id:"_7-2关联关系字段的定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-2关联关系字段的定义"}},[t._v("#")]),t._v(" 7.2关联关系字段的定义")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("input RelationFieldInput  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("\n  fromobject"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String\n  fromfield"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String\n  toobject"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String\n  tofield"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String\n  ifcascade"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Boolean "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  invisible_roles"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Role"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  irrevisible_roles"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Role"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  relationtype"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" RelationType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ntype RelationField_InsertResult  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id_list"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String\n  nodes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("RelationField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ntype RelationFieldInput  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("\n  fromobject"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String\n  fromfield"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String\n  toobject"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String\n  tofield"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String\n  ifcascade"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Boolean "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  invisible_roles"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Role"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  irrevisible_roles"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Role"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  relationtype"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" RelationType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("relationsInSchema_IDInput")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reset"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Boolean "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" to_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" _NestInputResult \n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("relationsInSchema_ObjectInput")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reset"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Boolean "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" to_object"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("RelationFieldInput"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" _NestInputResult \n")])])]),a("p",[t._v("以上是在一个对象类型中添加一个关联关系，该对象类型在关联关系中充当左对象类型。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("type RelationField_DeleteResult\n  affected_rows"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Int\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("relationsInSchema_NestRemove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" to_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" _NestRemoveResult \n")])])]),a("p",[t._v("以上是在一个对象类型中删除一个关联关系字段。")]),t._v(" "),a("h3",{attrs:{id:"_7-3-其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-其他"}},[t._v("#")]),t._v(" 7.3 其他")]),t._v(" "),a("p",[t._v("在定义关联关系时，fromfield必须和fromobject中的其他字段，字段名不重复，tofield必须和toobject中的其他字段，字段名不重复。在关联关系字段定义完成后，会在fromobject对象类型中新增一个fromfield字段，会在toobject对象类型中新增一个tofield字段。")])])}),[],!1,null,null,null);s.default=n.exports}}]);