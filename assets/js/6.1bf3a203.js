(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{329:function(t,a,s){"use strict";s.r(a);var n=s(33),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"十、外部schema的集成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#十、外部schema的集成"}},[t._v("#")]),t._v(" 十、外部Schema的集成")]),t._v(" "),s("p",[t._v("为了增加EasyGQL的扩展性，EasyGQL提供集成外部Schema的功能。")]),t._v(" "),s("h2",{attrs:{id:"_10-1-外部schema的定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-外部schema的定义"}},[t._v("#")]),t._v(" 10.1 外部Schema的定义")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("序号")]),t._v(" "),s("th",[t._v("属性")]),t._v(" "),s("th",[t._v("含义")]),t._v(" "),s("th",[t._v("非空")]),t._v(" "),s("th",[t._v("默认值")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("1")]),t._v(" "),s("td",[t._v("id")]),t._v(" "),s("td",[t._v("唯一标识")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("无")])]),t._v(" "),s("tr",[s("td",[t._v("2")]),t._v(" "),s("td",[t._v("endpoint")]),t._v(" "),s("td",[t._v("外部Schema的端点")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("无")])]),t._v(" "),s("tr",[s("td",[t._v("3")]),t._v(" "),s("td",[t._v("apilist")]),t._v(" "),s("td",[t._v("应用的API列表")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("空的List")])]),t._v(" "),s("tr",[s("td",[t._v("4")]),t._v(" "),s("td",[t._v("headers")]),t._v(" "),s("td",[t._v("对应http协议报文头")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("空的map")])])])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("type RemoteSchema "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("\n   endpoint"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String\n   apilist"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("RemoteAPI"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n   headers"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("object\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ntype RemoteAPI "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("\n   apiname"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String\n   disabled_roles"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Role"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_10-2-外部schema集成方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-外部schema集成方法"}},[t._v("#")]),t._v(" 10.2 外部Schema集成方法")]),t._v(" "),s("ul",[s("li",[t._v("每一个外部schema都可以用一个URL表示的endpoint来代替，EasyGQL能够解析并识别对应Schema的定义，开发者可以引用对应外部Schema的api，来实现多个Schema集成的目的。")]),t._v(" "),s("li",[t._v('schema会为每一个外部schema的endpoint生成一个16位的唯一字符串(简称endpointid)，当应用了该schema的api时，会对应的在本schema中生成一个apiname+"'),s("em",[t._v('"+endpointid的api，并且与该api相关的所有数据类型也都会被引入到当前Schema,并将原来schema中的对应对象类型名字改为类型名+"')]),t._v('"+endpointid。')]),t._v(" "),s("li",[t._v("每当被引用的api被调用时，EasyGQL会调用对应的外部Schema，并将它的返回值返回给调用方。")])]),t._v(" "),s("h2",{attrs:{id:"_10-3-外部schema集成的api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-3-外部schema集成的api"}},[t._v("#")]),t._v(" 10.3 外部Schema集成的API")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("\ninput RemoteSchemaInput "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("\n   endpoint"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n   headers"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("object\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ninput RemoteAPIInput "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),t._v("\n  apiname"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n  disabled_roles"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Role"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remoteschemaInSchemaObjectAddInput")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child_id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("child_object"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("RemoteSchemaInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("confilctEnum"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("ConfilctEnum"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Replace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("parent_Id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("RemoteSchema_InsertResult\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remoteschemaInSchemaObjectRemove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child_id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("parent_Id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("RemoteSchema_DeleteResult\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apilistInRemoteSchemaAddInput")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child_id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("child_object"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("RemoteAPIInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("parent_Id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("RemoteAPI_InsertResult\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apilistInRemoteSchemaRemove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child_id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("parent_Id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ID")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("RemoteAPI_DeleteResult\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);